{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kirill\\\\Desktop\\\\HSE\\\\callSystem\\\\front\\\\src\\\\pages\\\\AdminPage.js\";\nimport React, { useState, useContext, useCallback, useEffect } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { useHttp } from '../hooks/http.hooks';\nimport { NotificationList } from '../components/NotificationList.js';\nimport useSound from 'use-sound';\nimport notifySound from '../sounds/notify.mp3';\nexport const AdminPage = () => {\n  var notification = null;\n  const auth = useContext(AuthContext);\n  const {\n    request\n  } = useHttp();\n  const [sound] = useSound(notifySound);\n  const getNofitication = useCallback(async () => {\n    try {\n      const data = await request(`/api/data/getNotifications`, 'GET', null, {\n        Authorization: `Bearer ${auth.token}`\n      });\n\n      if (notification !== data) {\n        notification = data;\n        sound();\n      }\n    } catch (e) {}\n  }, [auth.token, request, sound]);\n  useEffect(() => {\n    getNofitication();\n    const interval = setInterval(getNofitication, 3000);\n    return () => clearInterval(interval);\n  }, [getNofitication]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, notification && /*#__PURE__*/React.createElement(NotificationList, {\n    notifications: notification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 23\n    }\n  }));\n};","map":{"version":3,"sources":["C:/Users/Kirill/Desktop/HSE/callSystem/front/src/pages/AdminPage.js"],"names":["React","useState","useContext","useCallback","useEffect","AuthContext","useHttp","NotificationList","useSound","notifySound","AdminPage","notification","auth","request","sound","getNofitication","data","Authorization","token","e","interval","setInterval","clearInterval"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,WAAtC,EAAmDC,SAAnD,QAAoE,OAApE;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,gBAAT,QAAiC,mCAAjC;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM;AAE7B,MAAIC,YAAY,GAAG,IAAnB;AAEA,QAAMC,IAAI,GAAGV,UAAU,CAACG,WAAD,CAAvB;AACA,QAAM;AAACQ,IAAAA;AAAD,MAAYP,OAAO,EAAzB;AACA,QAAM,CAACQ,KAAD,IAAUN,QAAQ,CAACC,WAAD,CAAxB;AAGA,QAAMM,eAAe,GAAGZ,WAAW,CAAE,YAAY;AAC/C,QAAG;AAED,YAAMa,IAAI,GAAG,MAAMH,OAAO,CAAE,4BAAF,EAA8B,KAA9B,EAAoC,IAApC,EAAyC;AAC7DI,QAAAA,aAAa,EAAG,UAASL,IAAI,CAACM,KAAM;AADyB,OAAzC,CAA1B;;AAIE,UAAIP,YAAY,KAAKK,IAArB,EACA;AACEL,QAAAA,YAAY,GAAGK,IAAf;AACAF,QAAAA,KAAK;AACN;AAEJ,KAZD,CAYC,OAAMK,CAAN,EAAQ,CACR;AAEJ,GAhBoC,EAgBlC,CAACP,IAAI,CAACM,KAAN,EAAYL,OAAZ,EAAoBC,KAApB,CAhBkC,CAAnC;AAmBFV,EAAAA,SAAS,CAAE,MAAM;AAEfW,IAAAA,eAAe;AAEf,UAAMK,QAAQ,GAAGC,WAAW,CAACN,eAAD,EAAiB,IAAjB,CAA5B;AAEA,WAAO,MAAMO,aAAa,CAACF,QAAD,CAA1B;AAED,GARQ,EAQN,CAACL,eAAD,CARM,CAAT;AAWE,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEJ,YAAY,iBAAI,oBAAC,gBAAD;AAAkB,IAAA,aAAa,EAAIA,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADlB,CADF;AAKD,CA5CM","sourcesContent":["import React, { useState, useContext, useCallback, useEffect } from 'react';\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hooks';\r\nimport { NotificationList } from '../components/NotificationList.js'\r\nimport useSound from 'use-sound'\r\nimport notifySound from '../sounds/notify.mp3'\r\n\r\nexport const AdminPage = () => {\r\n\r\n  var notification = null; \r\n\r\n  const auth = useContext(AuthContext)\r\n  const {request} = useHttp()\r\n  const [sound] = useSound(notifySound);\r\n\r\n  \r\n  const getNofitication = useCallback( async () => {\r\n    try{\r\n\r\n      const data = await request(`/api/data/getNotifications`,'GET',null,{ \r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n        if (notification !== data)\r\n        {\r\n          notification = data\r\n          sound()\r\n        }\r\n\r\n    }catch(e){\r\n    }\r\n  \r\n}, [auth.token,request,sound])\r\n\r\n\r\nuseEffect( () => {\r\n\r\n  getNofitication()\r\n\r\n  const interval = setInterval(getNofitication,3000)\r\n\r\n  return () => clearInterval(interval)\r\n\r\n}, [getNofitication])  \r\n\r\n\r\n  return(\r\n    <div>\r\n    { notification && <NotificationList notifications = {notification} />}\r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}